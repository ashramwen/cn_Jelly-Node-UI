<div class="main-container">
  <div class="main-header">
    <div class="left-container">
      <ul>
        <li><i class="fa fa-plus-circle" (click)="zoomIn()"></i></li>
        <li><i class="fa fa-minus-circle" (click)="zoomOut()"></i></li>
        <li>
          <i class="fa fa-expand" 
            [class.fa-expand]="!fullscreen" 
            [class.fa-compress]="fullscreen"
            (click)="toggleFullScreen()"></i>
          </li>
        <li>
          <input type="text" class="scale-size-txt" autocomplete="off" (keydown.enter)="$event.target.blur()" (blur)="scaleTxtBlur()" [(ngModel)]="scale"><label class="scale-percentage">%</label>
        </li>
        <li><i class="fa fa-hand-stop-o" [class.active]="nodeView.nodeCanvas.dragEnabled" (click)="toggleDragMove()"></i></li>
      </ul>
    </div>
    <div class="title-container" *ngIf="nodeFlow">
      <label class="title" [hidden]="editingName" (click)="startEditingName()">
        {{nodeFlow.flowName || 'Untitled Rule'}}
      </label>
      <input #flowNameTxt class="title-txt" type="text" (blur)="stopEditingName()" [hidden]="!editingName" [(ngModel)]="nodeFlow.flowName">
    </div>
    <div class="right-container">
      <ul>
        <li *ngIf="!isNew && nodeFlow.published">
          <div class="btn-toggle">
            <label [class.checked]="!nodeFlow.enabled" (click)="disableRule()"><input type="radio" name="enabled" [(ngModel)]="enabled" />禁用</label>
            <label [class.checked]="nodeFlow.enabled" (click)="enableRule()"><input type="radio" name="enabled" [(ngModel)]="enabled" />启用</label>
          </div>
        </li>
        <li>
          <button class="btn-save" (click)="submit()">保存</button>
        </li>
        <li>
          <button class="btn-publish" (click)="publish()">{{isNew? '保存并发布': '发布'}}</button>
        </li>
      </ul>
    </div>
  </div>
  <div class="main-body clearfix">
    <jn-view [nodeFlow]="nodeFlow" #nodeView></jn-view>
  </div>
</div>